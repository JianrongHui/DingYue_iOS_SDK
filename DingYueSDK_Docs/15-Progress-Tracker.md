# å¼€å‘è¿›åº¦è¿½è¸ª

> ç”¨é€”ï¼šè·¨ AI/è·¨äººå‘˜äº¤æ¥æ—¶å¿«é€Ÿäº†è§£"å·²å®Œæˆ/è¿›è¡Œä¸­/å¾…åŠ"ã€‚
> æ›´æ–°æ–¹å¼ï¼šæ¯æ¬¡åˆå¹¶æˆ–é‡Œç¨‹ç¢‘å˜æ›´åæ›´æ–°æœ¬æ–‡ä»¶ï¼ŒåŠ¡å¿…é™„å¸¦æ—¥æœŸã€‚
> æœ€åæ›´æ–°ï¼š2026-01-04

---

## æ€»ä½“è¿›åº¦æ¦‚è§ˆ

| é‡Œç¨‹ç¢‘ | æè¿° | è¿›åº¦ | Owner | çŠ¶æ€ |
|--------|------|------|-------|------|
| M1 | åå°åŸºç¡€èƒ½åŠ›ï¼ˆé…ç½®/äº‹ä»¶/åŒ…ç®¡ç†ï¼‰ | 90% | Backend | ğŸŸ¢ æ¥è¿‘å®Œæˆ |
| M2 | ç®¡ç†åå°ï¼ˆWeb Adminï¼‰ | 90% | Web | ğŸŸ¢ æ¥è¿‘å®Œæˆ |
| M3 | SDK æ”¹é€ ï¼ˆiOSï¼‰ | 95% | iOS | ğŸŸ¢ æ¥è¿‘å®Œæˆ |
| M4 | æ•°æ®ä¸åˆ†æï¼ˆGA/Firebase/æ•°ä»“ï¼‰ | 60% | Data | ğŸŸ¡ è¿›è¡Œä¸­ |

---

## M1 åå°åŸºç¡€èƒ½åŠ› (90%)

### å·²å®Œæˆ
- [x] æœåŠ¡å™¨éª¨æ¶ï¼ˆExpress + TypeScriptï¼‰
- [x] `/healthz` å¥åº·æ£€æŸ¥è·¯ç”±
- [x] `request_id` ä¸­é—´ä»¶
- [x] `error_handler` ä¸­é—´ä»¶
- [x] è§„åˆ™å¼•æ“åº“ï¼ˆDSL è§£æä¸å‘½ä¸­åˆ¤æ–­ï¼‰
- [x] å®éªŒåˆ†æµç®—æ³•ï¼ˆhash + bucketï¼‰
- [x] **HMAC-SHA256 é‰´æƒä¸­é—´ä»¶** _(2025-01-04)_
- [x] **äº‹ä»¶æŒä¹…åŒ–åˆ° D1** _(2025-01-04)_
- [x] **é…ç½®æ¥å£æ¥å…¥è§„åˆ™å¼•æ“ä¸å®éªŒåˆ†æµ** _(2025-01-04)_
- [x] **åŒ…ç®¡ç†ï¼šmanifest æ ¡éªŒ + checksum è®¡ç®— + CDN URL** _(2025-01-04)_

### å¾…åŠï¼ˆä½ä¼˜å…ˆçº§ï¼‰
| ä»»åŠ¡ | Owner | ä¾èµ– | å¯¹åº”è§„èŒƒ |
|------|-------|------|----------|
| D1 è¡¨ç»“æ„è¿ç§»è„šæœ¬ | Backend | æ—  | 03-Database-Schema |
| R2 å¯¹è±¡å­˜å‚¨é›†æˆ | Backend | Cloudflare èµ„æºåˆå§‹åŒ– | 02-Backend-APIs |

### éªŒæ”¶æ¡ä»¶
- [x] `/v1/sdk/config` è¿”å›æœ‰æ•ˆ placement/variant
- [x] `/v1/sdk/events` å¯æ‰¹é‡å…¥åº“
- [x] åŒ…ä¸Šä¼ åå¯ç”Ÿæˆ CDN URL ä¸ checksum

---

## M2 ç®¡ç†åå° (90%)

### å·²å®Œæˆ
- [x] web-admin éª¨æ¶ï¼ˆReact + Vite + TypeScriptï¼‰
- [x] é¡µé¢è·¯ç”±é…ç½®
- [x] é™æ€ mock æ•°æ®
- [x] **App ç®¡ç†é¡µé¢ï¼ˆå®Œæ•´ CRUDï¼‰** _(2025-01-04)_
- [x] **Placement ç®¡ç†é¡µé¢ï¼ˆå®Œæ•´ CRUDï¼‰** _(2025-01-04)_
- [x] **Variant ç®¡ç†é¡µé¢ï¼ˆå®Œæ•´ CRUDï¼‰** _(2025-01-04)_
- [x] **localStorage æŒä¹…åŒ–å·¥å…·** _(2025-01-04)_
- [x] **è§„åˆ™å¯è§†åŒ–æ„å»ºå™¨ï¼ˆæ¡ä»¶ç¼–è¾‘/é¢„è§ˆ/æµ‹è¯•ï¼‰** _(2026-01-04)_
- [x] **å®éªŒç®¡ç†é¡µé¢ï¼ˆçŠ¶æ€æµ/å˜ä½“æƒé‡ï¼‰** _(2026-01-04)_
- [x] **äº‹ä»¶æŸ¥è¯¢é¡µé¢ï¼ˆç­›é€‰/æ¼æ–—åˆ†æ/å¯¼å‡ºï¼‰** _(2026-01-04)_
- [x] **åŒ…ä¸Šä¼ ä¸ç‰ˆæœ¬ç®¡ç†é¡µé¢ï¼ˆä¸Šä¼ /æ¿€æ´»/å›æ»šï¼‰** _(2026-01-04)_

### å¾…åŠ
| ä»»åŠ¡ | Owner | ä¾èµ– | å¯¹åº”è§„èŒƒ |
|------|-------|------|----------|
| æ¥å…¥çœŸå®åç«¯ API | Web | M1 å®Œæˆ | 02-Backend-APIs |

### éªŒæ”¶æ¡ä»¶
- [x] Apps/Placements/Variants å¯åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- [x] å¯å›æ»š H5 åŒ…ç‰ˆæœ¬
- [x] è§„åˆ™é¢„è§ˆä¸å‘½ä¸­æµ‹è¯•å¯ç”¨
- [ ] å¯å®Œæˆç«¯åˆ°ç«¯é…ç½®æŠ•æ”¾

---

## M3 SDK æ”¹é€  (95%)

### å·²å®Œæˆ
- [x] RevenueCat PurchaseProvider é€‚é…
- [x] äº‹ä»¶é˜Ÿåˆ—ä¸æ‰¹é‡ä¸ŠæŠ¥
- [x] ConfigProvider é…ç½®æ‹‰å–
- [x] H5 åŒ…ç®¡ç†ï¼ˆä¸‹è½½/è§£å‹/ç¼“å­˜ï¼‰
- [x] Example Demo æ”¹é€ 
- [x] H5Samples/Paywall ç¤ºä¾‹åŒ…
- [x] H5Samples/Guide ç¤ºä¾‹åŒ…
- [x] vip_*/guide_* Bridge å…¼å®¹
- [x] **HMAC-SHA256 ç­¾åå®ç°** _(2025-01-04)_
- [x] **å®Œæ•´äº‹ä»¶å­—æ®µè¡¥é½ï¼ˆå« customer_info_summaryï¼‰** _(2025-01-04)_
- [x] **vip_page_options/guide_page_options è‡ªåŠ¨å…³é—­æ§åˆ¶** _(2025-01-04)_

### å¾…åŠ
| ä»»åŠ¡ | Owner | ä¾èµ– | å¯¹åº”è§„èŒƒ |
|------|-------|------|----------|
| è”è°ƒéªŒè¯ï¼ˆä¸åç«¯çœŸå®æ¥å£è”è°ƒï¼‰ | iOS | M1 å®Œæˆ | - |
| manifest.json entry_path å¤šå±‚ç›®å½•éªŒè¯ | iOS | æ—  | 08-H5-Package-Spec |
| checksum æ ¡éªŒå¤±è´¥å›é€€é€»è¾‘éªŒè¯ | iOS | æ—  | 08-H5-Package-Spec |

### éªŒæ”¶æ¡ä»¶
- [x] HMAC ç­¾åæ­£ç¡®è®¡ç®—å¹¶æºå¸¦
- [x] äº‹ä»¶å®Œæ•´ä¸ŠæŠ¥ï¼ˆå« customer_info_summaryï¼‰
- [x] è‡ªåŠ¨å…³é—­æ§åˆ¶ç”Ÿæ•ˆ
- [ ] Guide/Paywall ç«¯åˆ°ç«¯è”è°ƒé€šè¿‡

---

## M4 æ•°æ®ä¸åˆ†æ (60%)

### å·²å®Œæˆ
- [x] **GA4 Measurement Protocol äº‹ä»¶è½¬å‘** _(2025-01-04)_
- [x] **äº‹ä»¶åç§°æ˜ å°„ï¼ˆSDK -> GA4ï¼‰** _(2025-01-04)_
- [x] **å¼‚æ­¥è½¬å‘é›†æˆï¼ˆä¸é˜»å¡ä¸»æµç¨‹ï¼‰** _(2025-01-04)_
- [x] **Firebase äº‹ä»¶è½¬å‘** _(2026-01-04)_
- [x] **æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆ8 å¼ è¡¨ï¼‰** _(2026-01-04)_

### å¾…åŠ
| ä»»åŠ¡ | Owner | ä¾èµ– | å¯¹åº”è§„èŒƒ |
|------|-------|------|----------|
| analytics_sinks é…ç½®ç®¡ç† | Backend | è¡¨ç»“æ„ | 03-Database-Schema |
| æ•°ä»“ fact_events è¡¨ä¸ ETL | Data | äº‹ä»¶æ¥å£ | 09-Data-Warehouse |
| ç»Ÿè®¡ SQL æ¨¡æ¿éªŒè¯ | Data | æ•°ä»“è¡¨ | 10-Analytics-SQL |
| è½¬åŒ–ç‡æŠ¥è¡¨ | Data | æ•°ä»“è¡¨ | 10-Analytics-SQL |
| å®éªŒå¯¹æ¯”åˆ†æ | Data | æ•°ä»“è¡¨ | 10-Analytics-SQL |

### éªŒæ”¶æ¡ä»¶
- [x] GA4 è½¬å‘æ•°æ®å‡†ç¡®
- [x] Firebase è½¬å‘æ•°æ®å‡†ç¡®
- [ ] æ ¸å¿ƒæ¼æ–—å¯æŸ¥ï¼ˆPaywall Enter â†’ Purchase Successï¼‰
- [ ] å®éªŒå¯¹æ¯”å¯ç”¨

---

## é£é™©ä¸é˜»å¡é¡¹

| é£é™©/é˜»å¡ | ä¸¥é‡ç¨‹åº¦ | çŠ¶æ€ | è´Ÿè´£äºº | åº”å¯¹æªæ–½ |
|-----------|----------|------|--------|----------|
| RevenueCat Offering ç¼ºå¤± | ğŸŸ¡ ä¸­ | ç›‘æ§ä¸­ | iOS | fallback to current offering + å‘Šè­¦ |
| H5 åŒ…ä½“ç§¯è¿‡å¤§å½±å“åŠ è½½ | ğŸŸ¡ ä¸­ | ç›‘æ§ä¸­ | Web | é™åˆ¶ <=10MBï¼Œå•èµ„æº <=2MB |
| Cloudflare R2 + CDN å·²ç¡®å®š | ğŸŸ¢ ä½ | å·²ç¡®è®¤ | Backend | ç»‘å®š R2 bucket ä¸ CDN åŸŸå |
| äº‹ä»¶ä¸¢å¤±é£é™© | ğŸŸ¢ ä½ | å·²è§£å†³ | iOS | æœ¬åœ°æŒä¹…é˜Ÿåˆ— + D1 æŒä¹…åŒ– |

---

## å¹¶è¡Œå¼€å‘æ‰§è¡Œè®°å½•

### ç¬¬ä¸€é˜¶æ®µï¼ˆ2025-01-04ï¼‰
| ä»»åŠ¡ | åˆ†æ”¯ | æäº¤ | çŠ¶æ€ |
|------|------|------|------|
| HMAC é‰´æƒä¸­é—´ä»¶ | feat/hmac-auth | e036779 | âœ… å·²åˆå¹¶ |
| äº‹ä»¶æŒä¹…åŒ– | feat/events-persistence | 5878692 | âœ… å·²åˆå¹¶ |
| è§„åˆ™å¼•æ“æ¥å…¥ | feat/rules-integration | 63144e6 | âœ… å·²åˆå¹¶ |

### ç¬¬äºŒé˜¶æ®µï¼ˆ2025-01-04ï¼‰
| ä»»åŠ¡ | åˆ†æ”¯ | æäº¤ | çŠ¶æ€ |
|------|------|------|------|
| åŒ…ç®¡ç†å®Œå–„ | feat/package-management | 63de7a1 | âœ… å·²åˆå¹¶ |
| Web ç®¡ç†åå°é¡µé¢ | feat/web-admin-pages | 890e568 | âœ… å·²åˆå¹¶ |
| iOS HMAC + äº‹ä»¶ | feat/ios-sdk-enhancement | a1688d8 | âœ… å·²åˆå¹¶ |
| GA4 äº‹ä»¶è½¬å‘ | feat/analytics-forwarding | 61c0f63 | âœ… å·²åˆå¹¶ |

### ç¬¬ä¸‰é˜¶æ®µï¼ˆ2026-01-04ï¼‰
| ä»»åŠ¡ | åˆ†æ”¯ | æäº¤ | çŠ¶æ€ |
|------|------|------|------|
| è§„åˆ™å¯è§†åŒ–æ„å»ºå™¨ | feat/rules-builder | ca40ea3 | âœ… å·²åˆå¹¶ |
| å®éªŒç®¡ç†é¡µé¢ | feat/experiments-page | 82d1565 | âœ… å·²åˆå¹¶ |
| äº‹ä»¶æŸ¥è¯¢é¡µé¢ | feat/events-query | e44c0cb | âœ… å·²åˆå¹¶ |
| åŒ…ä¸Šä¼ ä¸ç‰ˆæœ¬ç®¡ç† | feat/packages-upload | 9def394 | âœ… å·²åˆå¹¶ |
| Firebase è½¬å‘ä¸è¿ç§» | feat/firebase-migration | 5b64dc4 | âœ… å·²åˆå¹¶ |

---

## æ›´æ–°è®°å½•

| æ—¥æœŸ | å˜æ›´å†…å®¹ | æ“ä½œäºº |
|------|----------|--------|
| 2026-01-04 | ç¬¬ä¸‰é˜¶æ®µå¹¶è¡Œå¼€å‘ï¼šè§„åˆ™æ„å»ºå™¨ã€å®éªŒé¡µé¢ã€äº‹ä»¶æŸ¥è¯¢ã€åŒ…ä¸Šä¼ ã€Firebaseè½¬å‘ | AI åä½œ |
| 2025-01-04 | ç¬¬ä¸€é˜¶æ®µå¹¶è¡Œå¼€å‘ï¼šHMACé‰´æƒã€äº‹ä»¶æŒä¹…åŒ–ã€è§„åˆ™å¼•æ“æ¥å…¥ | AI åä½œ |
| 2025-01-04 | ç¬¬äºŒé˜¶æ®µå¹¶è¡Œå¼€å‘ï¼šåŒ…ç®¡ç†ã€Webé¡µé¢ã€iOS SDKã€GA4è½¬å‘ | AI åä½œ |
| 2025-01-04 | æ›´æ–°è¿›åº¦æ–‡æ¡£åæ˜ çœŸå®å®ŒæˆçŠ¶æ€ | AI |

---

## ä¸‹ä¸€é˜¶æ®µå¾…åŠï¼ˆå¯å¹¶è¡Œï¼‰

| ä»»åŠ¡ | æ¨¡å— | å¤æ‚åº¦ | ä¾èµ– |
|------|------|--------|------|
| æ¥å…¥çœŸå®åç«¯ API | Web | ä¸­ | M1 å®Œæˆ |
| ç«¯åˆ°ç«¯è”è°ƒéªŒè¯ | iOS + Backend | ä¸­ | M1 å®Œæˆ |
| analytics_sinks é…ç½®ç®¡ç† | Backend | ä½ | è¡¨ç»“æ„ |
| æ•°ä»“ fact_events è¡¨ä¸ ETL | Data | é«˜ | äº‹ä»¶æ¥å£ |
| ç»Ÿè®¡ SQL æ¨¡æ¿éªŒè¯ | Data | ä¸­ | æ•°ä»“è¡¨ |

---

## äº¤æ¥ç»™æ–°æ‰§è¡Œè€…çš„å¿…è¯»

æŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»ï¼š

1. **æ€»è§ˆä¸æ¶æ„**ï¼š`01-Solution-Overview.md`
2. **æ¥å£è§„èŒƒ**ï¼š`02-Backend-APIs.md`
3. **äº‹ä»¶å­—å…¸**ï¼š`04-Events-Dictionary.md`
4. **H5 è§„èŒƒ**ï¼š`08-H5-Package-Spec.md`
5. **OpenAPI**ï¼š`12-OpenAPI-Full.yaml`
6. **æ‰§è¡Œæ–¹æ¡ˆ**ï¼š`14-Development-Execution-Plan.md`

### å¿«é€Ÿæ£€æŸ¥æ¸…å•
- [x] JSON å­—æ®µä½¿ç”¨ snake_case
- [x] HMAC ç­¾åè§„åˆ™ï¼ˆMETHOD\nPATH\nTIMESTAMP\nNONCE\nSHA256(body)ï¼‰
- [x] H5 åŒ…å¿…é¡»åŒ…å« manifest.json
- [x] Bridge å‘½åï¼ˆvip_*/guide_*ï¼‰
- [x] äº‹ä»¶å¿…å¡«å­—æ®µï¼ˆè§ 11-SDK-Event-Spec.mdï¼‰
